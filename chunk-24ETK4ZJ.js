import{a as T,c as G,l as M,m as N,n as R,o as z}from"./chunk-WBA4PHNS.js";import"./chunk-JIHXMCGQ.js";import"./chunk-NFPXJMM5.js";import{h as F,m as P,n as V,q as D}from"./chunk-EEF6YIPE.js";import"./chunk-O26KD3QC.js";import{m as A,n as E}from"./chunk-7U5ECR27.js";import{a as S}from"./chunk-RD7QS6E2.js";import"./chunk-ESUC2JUI.js";import"./chunk-76VAZDLT.js";import{Db as t,Eb as e,Fb as w,Gb as k,Kb as a,Vb as u,Wb as i,Ya as y,ba as c,ib as v,la as n,ma as r,oc as f,vb as x,wb as C,xa as h}from"./chunk-IZMJO6JO.js";import{a as g,b as _}from"./chunk-VOSPIT4N.js";var B=class b{store=c(S);router=c(A);snackBar=c(T);id=h.required();applicant=f(()=>this.store.applicants.value().find(({id:o})=>o===this.id()));form=f(()=>new G(this.applicant()));async submit(){if(this.form().invalid){this.form().markAllAsTouched();return}try{await this.store.update(_(g({},this.form().getRawValue()),{id:this.id()})),this.router.navigate(["blast-off"])}catch(o){console.error(o),o.code==="23505"&&this.snackBar.open("Application already exists","Close",{verticalPosition:"top",horizontalPosition:"end",duration:5e3})}}async delete(){this.store.delete(this.id()),this.router.navigate([""])}static \u0275fac=function(p){return new(p||b)};static \u0275cmp=v({type:b,selectors:[["iisa-edit-application-form"]],hostAttrs:[1,"place-items-center","p-8","*:max-w-lg","text-balance","place-self-center"],inputs:{id:[1,"id"]},decls:24,vars:3,consts:[["dialog",""],[1,"grid","gap-4",3,"submit","formGroup"],[1,"contents"],[1,"flex","gap-2"],["type","button",1,"button","button__bold","bg-red-400","place-self-center","capitalize","me-auto",3,"click"],["routerLink","",1,"button","button__light","place-self-center","capitalize"],["type","submit",1,"button","button__bold","place-self-center","capitalize"],["closedby","any",1,"place-self-center","m-4","open:grid","grid-rows-[auto_1fr]","not-open:backdrop:opacity-0","backdrop:transition-opacity","open:scale-100","open:opacity-100","starting:open:scale-80","scale-80","starting:open:opacity-0","opacity-0","transition-all","transition-discrete","bg-canvas","border-surface-1","border","max-w-md","max-h-[80vh]","backdrop:bg-canvas/75","p-8","rounded-xl","shadow-xl"],[1,"py-4"],[1,"text-xl","font-bold"],[1,"flex","gap-2","justify-end","pt-4"],["autofocus","",1,"button","button__light",3,"click"],[1,"button","button__bold","bg-red-400",3,"click"]],template:function(p,l){if(p&1){let s=k();t(0,"form",1),a("submit",function(){return n(s),r(l.submit())}),w(1,"iisa-astronaut-identity",2)(2,"iisa-communication-protocols",2)(3,"iisa-personal-orbit",2)(4,"iisa-personal-statement",2),t(5,"section",3)(6,"button",4),a("click",function(){n(s);let d=u(13);return r(d.showModal())}),i(7," Delete Application "),e(),t(8,"a",5),i(9," Cancel "),e(),t(10,"button",6),i(11," Save Changes "),e()()(),t(12,"dialog",7,0)(14,"header",8)(15,"h1",9),i(16,"Are you sure you want to abort this mission?"),e()(),t(17,"p"),i(18,"Once deleted, your application will be lost in the void of space and cannot be recovered."),e(),t(19,"footer",10)(20,"button",11),a("click",function(){n(s);let d=u(13);return r(d.close())}),i(21," Return to Safety "),e(),t(22,"button",12),a("click",function(){return n(s),r(l.delete())}),i(23," Delete Application "),e()()()}p&2&&(x("formGroup",l.form()),y(10),C("opacity-50",l.form().invalid))},dependencies:[D,P,F,V,M,N,R,z,E],encapsulation:2,changeDetection:0})};export{B as EditApplicationFormComponent};
