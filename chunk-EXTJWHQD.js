import{Aa as u,T as D,V as h,X as j,ba as f,c as k,h as w,ja as d,oc as p,pa as x,pc as l,q as C,qc as b,ra as m,rc as M,w as S}from"./chunk-CK7QNC57.js";import{a as v,b as y}from"./chunk-VOSPIT4N.js";function T(r){r||(d(T),r=f(m));let e=new k(t=>r.onDestroy(t.next.bind(t)));return t=>t.pipe(D(e))}function R(r,e){!e?.injector&&d(R);let t=e?.injector??f(x),s=new w(1),i=b(()=>{let o;try{o=r()}catch(c){p(()=>s.error(c));return}p(()=>s.next(o))},{injector:t,manualCleanup:!0});return t.get(m).onDestroy(()=>{i.destroy(),s.complete()}),s.asObservable()}function g(r,e){let t=!e?.manualCleanup;t&&!e?.injector&&d(g);let s=t?e?.injector?.get(m)??f(m):null,i=I(e?.equal),o;e?.requireSync?o=u({kind:0},{equal:i}):o=u({kind:1,value:e?.initialValue},{equal:i});let c,a=r.subscribe({next:n=>o.set({kind:1,value:n}),error:n=>{if(e?.rejectErrors)throw n;o.set({kind:2,error:n})},complete:()=>{c?.()}});if(e?.requireSync&&o().kind===0)throw new h(601,!1);return c=s?.onDestroy(a.unsubscribe.bind(a)),l(()=>{let n=o();switch(n.kind){case 1:return n.value;case 2:throw n.error;case 0:throw new h(601,!1)}},{equal:e?.equal})}function I(r=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&r(e.value,t.value)}function q(r){return r?.injector||d(q),M(y(v({},r),{loader:void 0,stream:e=>{let t,s=()=>t.unsubscribe();e.abortSignal.addEventListener("abort",s);let i=u({value:void 0}),o,c=new Promise(n=>o=n);function a(n){i.set(n),o?.(i),o=void 0}return t=r.loader(e).subscribe({next:n=>a({value:n}),error:n=>{a({error:n}),e.abortSignal.removeEventListener("abort",s)},complete:()=>{o&&a({error:new Error("Resource completed before producing a value")}),e.abortSignal.removeEventListener("abort",s)}}),c}}))}var E="color-theme",O=class r{preferredColorScheme=g(S(window.matchMedia("(prefers-color-scheme: dark)"),"change").pipe(C(e=>e.matches?"dark":"light")),{initialValue:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});mode=u(this.getTheme());toggle(){this.mode.update(e=>e==="dark"?"light":"dark")}theme=l(()=>{let e=this.mode();return e==="system"?this.preferredColorScheme():e});isDark=l(()=>this.theme()==="dark");isLight=l(()=>this.theme()==="light");constructor(){b(()=>{document.documentElement.dataset.theme=this.theme()}),b(()=>this.setTheme())}getTheme(){return localStorage.getItem(E)??"system"}setTheme(){localStorage.setItem(E,this.mode())}static \u0275fac=function(t){return new(t||r)};static \u0275prov=j({token:r,factory:r.\u0275fac,providedIn:"root"})};export{T as a,R as b,g as c,q as d,O as e};
