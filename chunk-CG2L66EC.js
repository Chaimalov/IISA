import{Aa as a,T as j,V as h,X as x,ba as f,c as k,h as w,ja as d,nc as p,oc as b,pa as D,pc as m,q as C,qc as M,ra as l,w as S}from"./chunk-GMDBLYL5.js";import{a as g,b as y}from"./chunk-VOSPIT4N.js";function T(r){r||(d(T),r=f(l));let e=new k(t=>r.onDestroy(t.next.bind(t)));return t=>t.pipe(j(e))}function R(r,e){!e?.injector&&d(R);let t=e?.injector??f(D),s=new w(1),i=m(()=>{let o;try{o=r()}catch(c){p(()=>s.error(c));return}p(()=>s.next(o))},{injector:t,manualCleanup:!0});return t.get(l).onDestroy(()=>{i.destroy(),s.complete()}),s.asObservable()}function v(r,e){let t=!e?.manualCleanup;t&&!e?.injector&&d(v);let s=t?e?.injector?.get(l)??f(l):null,i=I(e?.equal),o;e?.requireSync?o=a({kind:0},{equal:i}):o=a({kind:1,value:e?.initialValue},{equal:i});let c,u=r.subscribe({next:n=>o.set({kind:1,value:n}),error:n=>{if(e?.rejectErrors)throw n;o.set({kind:2,error:n})},complete:()=>{c?.()}});if(e?.requireSync&&o().kind===0)throw new h(601,!1);return c=s?.onDestroy(u.unsubscribe.bind(u)),b(()=>{let n=o();switch(n.kind){case 1:return n.value;case 2:throw n.error;case 0:throw new h(601,!1)}},{equal:e?.equal})}function I(r=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&r(e.value,t.value)}function q(r){return r?.injector||d(q),M(y(g({},r),{loader:void 0,stream:e=>{let t,s=()=>t.unsubscribe();e.abortSignal.addEventListener("abort",s);let i=a({value:void 0}),o,c=new Promise(n=>o=n);function u(n){i.set(n),o?.(i),o=void 0}return t=r.loader(e).subscribe({next:n=>u({value:n}),error:n=>{u({error:n}),e.abortSignal.removeEventListener("abort",s)},complete:()=>{o&&u({error:new Error("Resource completed before producing a value")}),e.abortSignal.removeEventListener("abort",s)}}),c}}))}var E="color-theme",O=class r{preferredColorScheme=v(S(window.matchMedia("(prefers-color-scheme: dark)"),"change").pipe(C(e=>e.matches?"dark":"light")),{initialValue:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});mode=a(this.getTheme());toggle(){this.mode.update(e=>e==="dark"?"light":"dark")}theme=b(()=>{let e=this.mode();return e==="system"?this.preferredColorScheme():e});constructor(){m(()=>{document.documentElement.dataset.theme=this.theme()}),m(()=>{this.setTheme()})}getTheme(){return localStorage.getItem(E)??"system"}setTheme(){localStorage.setItem(E,this.mode())}static \u0275fac=function(t){return new(t||r)};static \u0275prov=x({token:r,factory:r.\u0275fac,providedIn:"root"})};export{T as a,R as b,v as c,q as d,O as e};
